<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../yo-navpanel/yo-navpanel.html">
<link rel="import" href="../yo-grouplist/yo-grouplist.html">
<link rel="import" href="../yo-messagelist/yo-messagelist.html">

<polymer-element name="yo-app">
	<template>
		<link rel="stylesheet" href="yo-app.css">

		<core-drawer-panel>

			<core-header-panel drawer flex fixed>
				<yo-navpanel user="{{user}}"></yo-navpanel>
			</core-header-panel>

		    <core-animated-pages main id="pages" flex selected="{{curPage}}" on-core-animated-pages-transition-end="{{transitionend}}" transitions="cross-fade-all hero-transition">

				<section vertical layout>
					<yo-grouplist groups="{{user.groups}}" on-select-group="{{onSelectGroup}}"></yo-grouplist>
				</section>

				<section vertical layout>
					<yo-messagelist group="{{selectedGroup}}" on-back="{{onback}}"></yo-messagelist>
				</section>

		    </core-animated-pages>

		</core-drawer-panel>
	</template>
	<script>
	(function () {
		Polymer({
			ready: function () {
				this.curPage = 0;
				this.user = {
					name: '李瑞骐',
					description: '职位描述',
					header: '../../images/tabby.jpg',
					actions: [
						{name: '我赞过的', image: 'thumb-up'},
						{name: '我标记过的', image: 'favorite'},
						{name: '热门关键词', image: 'translate'},
						{name: '草稿', image: 'drafts'}
					],
					groups: []
				};

				for (var i = 0; i < 20; i++) {
					this.user.groups.push({
						name: '测试群组' + i,
						_id: i + '',
						messages: [
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'},
							{content: '是东风科技的发，挥为范围分为访问开发和，我分开士大夫似的监，控范围', tags: ['TAG1', 'TAG1', 'TAG1', 'TAG1'], date: new Date(), header: '../../images/tabby.jpg'}
						]
					});
				}
			},
			onSelectGroup: function (event, detail, sender) {
				this.selectedGroup = detail;
				this.curPage = 1;
			},
			transitionend: function (event, detail, sender) {
				// body...
			},
			onback: function (event, detail, sender) {
				this.selectedGroup = undefined;
				this.curPage = 0;
			}
		});
	})();
	</script>
</polymer-element>












